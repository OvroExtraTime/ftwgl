<h1>admin</h1>
<div class="content-inner">
	<div class="content-inner-inner">
	<h1>manage users</h1>
		<table id="users_panel" class="center" cellspacing="0">
		</table>
	</div>
	
	<div class="content-inner-inner">
	<h1>manage tournaments</h1>
		<div id="tournaments_panel" class="content-inner-inner" cellspacing="0">
		</div>
		
		<a href="tournaments/new" class="button">Create Tournament</a>
	</div>
</div>

<script type="text/template" id="create_match_template">
	<%= simple_form_for([:admin, Tournament.new, Match.new], :url => CGI::unescape(admin_tournament_matches_path("{0}"))) do |f| %>
		<%= f.error_notification %>

		<%= f.input :home_team_id, collection: @teams, as: :select, label: "Home Team" %>
		<%= f.input :away_team_id, collection: @teams, as: :select, label: "Away Team" %>
		<%= f.input :week_num, label: "Week" %>
		<%= f.input :match_date, as: :date, label: "Match Date" %>
		<%= f.submit "Add New Match" %>
	<% end %>
</script>

<%= content_for :head do %>
	<%= stylesheet_link_tag "loading" %>
	<%= stylesheet_link_tag "cpanel" %>
<% end %>

<%= content_for :js do %>
	<script type="text/javascript">
		var adminRoutes = {
			users: '<%= admin_users_path %>',
			matches: '<%= CGI::unescape(admin_tournament_matches_path("{0}")) %>',
			tournaments: '<%= admin_tournaments_path %>'
		}
		var templates = {
			createMatch: $('#create_match_template').html()
		}
		var teams = eval('<%= raw(@teams.to_json) %>');
	</script>
	<%= javascript_include_tag "cpanel" %>
<% end %>